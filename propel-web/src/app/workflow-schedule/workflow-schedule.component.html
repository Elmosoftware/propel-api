<div class="form-container mt-2">
    <form [formGroup]="fh.form">
        <div class="form-group">
            <label class="mr-2 w-100">Enabled</label>
            <div class="d-flex justify-content-center">
                <mat-slide-toggle color="primary" id="enabled" formControlName="enabled"
                (change)="onEnabledChange($event)">
                </mat-slide-toggle>
            </div>
            <app-validation-message [control]="fh.form.controls['enabled']"></app-validation-message>
        </div>
        <div class="form-group">
            <div class="d-flex justify-content-center">
                <label class="mr-2 mt-1 text-mini">Single execution</label>
                <mat-slide-toggle color="primary" id="isRecurrent" formControlName="isRecurrent"
                    (change)="onScheduleTypeChange($event)">
                </mat-slide-toggle>
                <label class="ml-2 mt-1 text-mini">Recurrent schedule</label>
            </div>
            <app-validation-message [control]="fh.form.controls['isRecurrent']"></app-validation-message>
        </div>
        <div *ngIf="!fh.form.controls['isRecurrent'].value; else recurrentSchedule" class="form-group">
            <label for="onlyOn">Scheduled for</label>
            <input type="datetime-local" class="form-control" formControlName="onlyOn">
            <app-validation-message [control]="fh.form.controls['onlyOn']"></app-validation-message>
        </div>
        <ng-template #recurrentSchedule>
            <div class="form-group">
                <label for="everyAmount" class="data-required">Every</label>
                <div class="form-inline">
                    <input type="text" class="form-control" id="everyAmount" aria-describedby="everyAmount"
                        placeholder="How often will be scheduled for execution" formControlName="everyAmount" required>
                    <ng-select #everyUnit [items]="allScheduleUnits" [multiple]="false" labelForId="everyUnit"
                        [closeOnSelect]="true" [clearSearchOnAdd]="true" [searchable]="true" bindValue="value"
                        bindLabel="key" clearAllText="Clear" 
                        [clearable]="false" [compareWith]="compareFn"
                        (change)="onScheduleUnitChange($event)" 
                        placeholder="Select the recurrence unit." formControlName="everyUnit" class="ml-2">
                    </ng-select>
                </div>
                <app-validation-message [control]="fh.form.controls['everyAmount']"></app-validation-message>
                <app-validation-message [control]="fh.form.controls['everyUnit']"></app-validation-message>
            </div>
            <div class="form-group">
                <label for="weeklyOptions" class="data-required">Weekly options</label>
                <ng-select #weeklyOptions [items]="allWeekDays" [multiple]="true" labelForId="weeklyOptions"
                    [closeOnSelect]="false" [clearSearchOnAdd]="true" [searchable]="true" bindValue="value"
                    bindLabel="key" clearAllText="Clear" [compareWith]="compareFn"
                    placeholder="Select the days of the week the schedule will be executed."
                    formControlName="weeklyOptions">
                </ng-select>
                <app-validation-message [control]="fh.form.controls['weeklyOptions']"></app-validation-message>
            </div>
            <div formGroupName="monthlyOption">
                <div class="form-group">
                    <label for="monthlyOptionOrdinal" class="data-required">Monthly options</label>
                    <div class="form-inline">
                        <ng-select #monthlyOptionOrdinal [items]="allMonthlyOptionOrdinals" [multiple]="false"
                            labelForId="monthlyOptionOrdinal" [closeOnSelect]="true" [clearSearchOnAdd]="true"
                            [searchable]="true" bindValue="value" bindLabel="key" clearAllText="Clear"
                            [clearable]="false"
                            [compareWith]="compareFn" placeholder="Select the monthly recurrence option." 
                            formControlName="ordinal"></ng-select>
                        <ng-select #monthlyOptionDay [items]="allMonthlyOptionDays" [multiple]="false"
                            labelForId="monthlyOptionDay" [closeOnSelect]="true" [clearSearchOnAdd]="true"
                            [searchable]="true" bindValue="value" bindLabel="key" clearAllText="Clear"
                            [clearable]="false"
                            [compareWith]="compareFn" placeholder="Select the day is going to be executed." 
                            formControlName="day"
                            class="ml-2"></ng-select>
                    </div>

                </div>
            </div>
            <div class="form-group">
                <label for="startingAt">Not before</label>
                <input type="time" min="00:00" max="23:59" class="form-control" formControlName="startingAt" required>
                <app-validation-message [control]="fh.form.controls['startingAt']"></app-validation-message>
            </div>
        </ng-template>

        <pre>Is Form Valid: {{ fh.form.valid }}</pre>
        <pre>{{fh.value | json }}</pre>
    </form>
</div>